# 2022/09/05~ Unity1week「ためる」開発録
## 1日目
**何作ろう**  
前審査会で別クラスのメンバーがクリッカーゲーム作ってたな…  
### クリッカーゲームに決定
**取り敢えず動くものを作成した。**  
* ulong型を用いて出来るだけ大きな値を扱えるようにした。  
* UIを並べて全体のデザインを決定
## 2日目
**面白いけど、これC〇kkieClickerだよね？**  
* ジャンルはこれでいいとして、ゲーム性までパクるのはなんか違うな…
* 1週間でショップの機能作るの~~めんどい~~大変だから削って、バランス維持できそうな機能で補完しよう。  

**問題発覚**  
* ulong型って限界値(18446744073709551615)あるよね？  
  案の定、オーバーフローすると数値に異常をきたした。  

**解決**  
* System.Numericsから、BigInteger型を使用した。
* これなら限界値無いし、変な事しなきゃ大丈夫だろう。
## 3日目
**取り敢えずα版完成**  
* とにかく遊びまくってバグを見つける地獄が始まります。  

**問題発覚**
* 数時間放置してたらエラー出したり、数値が無限表示になったリするようになった。
## 4日目
**解決**  
_一部のスクリプトに互換性がなかった_
* 気付けて良かった。Mathfはdouble型だから10のN乗計算だと39、2のN乗計算だと128くらいでオーバーフローしてしまう。
* BigInteger型専用の計算クラス作って、ついでに命数法で表示できるように改良した。
## 5日目
**細かいバグの修正**
* 意図しないUIの表示とかデータ格納するCSVファイル修正して投稿の準備をした。
## 6日目
**Ver.1.0リリース(投稿)**
* 本環境でも遊んでみないとマズいよねって事でいったんUnityRoomに上げて遊んでみる。
* なんか1週間せずに完成まで持って行けたね(とはいえバグはあるだろうから面倒だけどそこは随時修正しないと)

---

# 使った機能とかのメモ
## BigInteger型
* 整数を理論上限界値無しで扱える巨大な数値を扱う型  
　　→[詳細はMicrosoftドキュメントを参照](https://docs.microsoft.com/ja-jp/dotnet/api/system.numerics.biginteger?view=net-6.0)
* `System.Numerics`をusingすることで使える
* 気を付けないとメモリを食いすぎてしまうので乱用する際は注意かも
* **個人的に躓いた点**
  * 計算時にオーバーフローもしくは結果が無限に飛ぶ
  * 元値は`BigInteger型`だけど、標準の`System.Math`とか`UnityEngine.Mathf`って`double型`で計算されるから、オーバーフローを起こす可能性が滅茶苦茶高い
  * `BigInteger型`専用のメソッドあるから、そういうのをちゃんと理解して使おう~~とか言いつつPow関数作って俺天才ってイキっちゃいました~~
